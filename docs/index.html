<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OpenWeatherMap API Wrapper • OpenWeatherMap for R</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="OpenWeatherMap API Wrapper">
<meta property="og:description" content="Accesses OpenWeatherMap's (owm) &lt;https://openweathermap.org/&gt; API.
   'owm' itself is a service providing weather data in the past, in the future and now.
   Furthermore, 'owm' serves weather map layers usable in frameworks like 'leaflet'.
   In order to access the API, you need to sign up for an API key. There are free and paid plans.
   Beside functions for fetching weather data from 'owm', 'owmr' supplies
   tools to tidy up fetched data (for fast and simple access) and to show it on leaflet maps.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">OpenWeatherMap for R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/owmr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/crazycapivara/owmr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="an-r-interface-to-openweathermap" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#an-r-interface-to-openweathermap" class="anchor"></a>An R Interface to OpenWeatherMap</h1></div>

<p><code>owmr</code> accesses <strong>OpenWeatherMap’s</strong> API, a service providing weather data in the past, in the future and now and furthermore, serving weather map layers usable in frameworks like <code>leaflet</code>. In order to access its API you have to sign up for an API key at</p>
<ul>
<li><a href="https://openweathermap.org" class="uri">https://openweathermap.org</a></li>
</ul>
<div id="builds" class="section level2">
<h2 class="hasAnchor">
<a href="#builds" class="anchor"></a>Builds</h2>
<p><strong>master</strong></p>
<p><a href="https://travis-ci.org/crazycapivara/owmr"><img src="https://travis-ci.org/crazycapivara/owmr.svg?branch=master" alt="Travis-CI Build Status"></a></p>
<p><strong>develop</strong></p>
<p><a href="https://travis-ci.org/crazycapivara/owmr"><img src="https://travis-ci.org/crazycapivara/owmr.svg?branch=develop" alt="Travis-CI Build Status"></a></p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># stable</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"owmr"</span>)

<span class="co"># unstable</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"crazycapivara/owmr"</span>)

<span class="co"># bleeding edge</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"crazycapivara/owmr"</span>, <span class="dt">ref =</span> <span class="st">"develop"</span>)</code></pre></div>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>See <strong>OpenWeatherMap’s</strong> API documentation for optional parameters, which can be passed to all functions fetching weather data via the <code>...</code> parameter in R</p>
<ul>
<li><a href="https://openweathermap.org/api/" class="uri">https://openweathermap.org/api/</a></li>
</ul>
<div id="setup" class="section level3">
<h3 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(owmr)

<span class="co"># first of all you have to set up your api key</span>
<span class="kw"><a href="reference/owmr_settings.html">owmr_settings</a></span>(<span class="st">"your_api_key"</span>)

<span class="co"># or store it in an environment variable called OWM_API_KEY (recommended)</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Sys.setenv">Sys.setenv</a></span>(<span class="dt">OWM_API_KEY =</span> <span class="st">"your_api_key"</span>) <span class="co"># if not set globally</span></code></pre></div>
</div>
<div id="usage" class="section level3">
<h3 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get current weather data by city name</span>
(res &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_current.html">get_current</a></span>(<span class="st">"London"</span>, <span class="dt">units =</span> <span class="st">"metric"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/owmr_as_tibble.html">owmr_as_tibble</a></span>()) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">##  [1] "dt_txt"              "temp"                "pressure"           
##  [4] "humidity"            "temp_min"            "temp_max"           
##  [7] "weather_id"          "weather_main"        "weather_description"
## [10] "weather_icon"        "wind_speed"          "wind_deg"           
## [13] "clouds_all"          "dt_sunrise_txt"      "dt_sunset_txt"</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## # A tibble: 1 x 6
##   dt_txt               temp pressure humidity temp_min temp_max
##   &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 2018-10-28 20:50:00  4.22     1017       81        3        6</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ... by city id</span>
(rio &lt;-<span class="st"> </span><span class="kw"><a href="reference/search_city_list.html">search_city_list</a></span>(<span class="st">"Rio de Janeiro"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">as.list</a></span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## $id
## [1] 3451190
## 
## $nm
## [1] "Rio de Janeiro"
## 
## $lat
## [1] -22.90278
## 
## $lon
## [1] -43.2075
## 
## $countryCode
## [1] "BR"</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/get_current.html">get_current</a></span>(rio<span class="op">$</span>id, <span class="dt">units =</span> <span class="st">"metric"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/owmr_as_tibble.html">owmr_as_tibble</a></span>() <span class="op">%&gt;%</span><span class="st"> </span>.[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## # A tibble: 1 x 6
##   dt_txt               temp pressure humidity temp_min temp_max
##   &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 2018-10-28 21:00:00  23.2     1014       64       23       24</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get current weather data for cities around geo point</span>
res &lt;-<span class="st"> </span><span class="kw"><a href="reference/find_cities_by_geo_point.html">find_cities_by_geo_point</a></span>(
  <span class="dt">lat =</span> rio<span class="op">$</span>lat,
  <span class="dt">lon =</span> rio<span class="op">$</span>lon,
  <span class="dt">cnt =</span> <span class="dv">5</span>,
  <span class="dt">units =</span> <span class="st">"metric"</span>
) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/owmr_as_tibble.html">owmr_as_tibble</a></span>()

idx &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(res[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]), <span class="st">"name"</span>)
res[, idx]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## # A tibble: 5 x 7
##   dt_txt            temp pressure humidity temp_min temp_max name         
##   &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;        
## 1 2018-10-28 21:0…  23.2     1014       64       23       24 Rio de Janei…
## 2 2018-10-28 21:0…  23.2     1014       64       23       24 São Cristóvão
## 3 2018-10-28 21:0…  23.2     1014       69       23       24 Botafogo     
## 4 2018-10-28 21:0…  23.2     1014       69       23       24 Pavão-Pavaoz…
## 5 2018-10-28 21:0…  23.2     1014       64       23       24 Vila Joaniza</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get forecast</span>
forecast &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_forecast.html">get_forecast</a></span>(<span class="st">"London"</span>, <span class="dt">units =</span> <span class="st">"metric"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/owmr_as_tibble.html">owmr_as_tibble</a></span>()

forecast[, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## # A tibble: 40 x 6
##    dt_txt               temp pressure humidity temp_min temp_max
##    &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 2018-10-28 21:00:00  2.76    1023.       71     2.76     4.22
##  2 2018-10-29 00:00:00  1.64    1021.       90     1.64     2.73
##  3 2018-10-29 03:00:00  2.54    1019.       99     2.54     3.27
##  4 2018-10-29 06:00:00  1.64    1018.       94     1.64     2   
##  5 2018-10-29 09:00:00  4.65    1016.       84     4.65     4.65
##  6 2018-10-29 12:00:00  8.44    1013.       77     8.44     8.44
##  7 2018-10-29 15:00:00  8.47    1010.       70     8.47     8.47
##  8 2018-10-29 18:00:00  5.96    1008.       76     5.96     5.96
##  9 2018-10-29 21:00:00  3.57    1005.       87     3.57     3.57
## 10 2018-10-30 00:00:00  3.07    1003.       97     3.07     3.07
## # ... with 30 more rows</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># apply funcs to some columns</span>
funcs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
  <span class="dt">temp =</span> round,
  <span class="dt">wind_speed =</span> round
)
forecast <span class="op">%&lt;&gt;%</span><span class="st"> </span><span class="kw"><a href="reference/parse_columns.html">parse_columns</a></span>(funcs)

<span class="co"># do some templating ...</span>
(<span class="st">"{{dt_txt}}h {{temp}}°C, {{wind_speed}} m/s"</span> <span class="op">%$$%</span>
<span class="st">  </span>forecast) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dv">10</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">##  [1] "2018-10-28 21:00:00h 3°C, 5 m/s" "2018-10-29 00:00:00h 2°C, 4 m/s"
##  [3] "2018-10-29 03:00:00h 3°C, 4 m/s" "2018-10-29 06:00:00h 2°C, 4 m/s"
##  [5] "2018-10-29 09:00:00h 5°C, 3 m/s" "2018-10-29 12:00:00h 8°C, 4 m/s"
##  [7] "2018-10-29 15:00:00h 8°C, 5 m/s" "2018-10-29 18:00:00h 6°C, 4 m/s"
##  [9] "2018-10-29 21:00:00h 4°C, 4 m/s" "2018-10-30 00:00:00h 3°C, 4 m/s"</code></pre></div>
</div>
</div>
<div id="documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h2>
<ul>
<li><a href="https://crazycapivara.github.io/owmr/" class="uri">https://crazycapivara.github.io/owmr/</a></li>
</ul>
<p>or type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><a href="reference/owmr.html">?owmr</a></code></pre></div>
</div>
<div id="run-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#run-tests" class="anchor"></a>Run tests</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/test">test</a></span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Loading owmr

## owmr 0.7.4
##    another crazy way to talk to OpenWeatherMap's API
##    Documentation: type ?owmr or https://crazycapivara.github.io/owmr/
##    Issues, notes and bleeding edge: https://github.com/crazycapivara/owmr/

## Testing owmr

## city list: ..
## mock httr::GET current: ....
## current weather data for multiple cities: ......
## current weather data: ........
## _DEPRECATED: W.
## mock httr::GET forecast: ......
## parse columns: ..
## render operator: ...
## tidy up data: ...
## 
## Warnings ------------------------------------------------------------------
## 1. tidy up all (@test_deprecated.R#8) - 'tidy_up_' is deprecated.
## Use 'owmr_as_tibble' instead.
## See help("Deprecated")
## 
## DONE ======================================================================</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=owmr">https://​cloud.r-project.org/​package=owmr</a>
</li>
<li>Browse source code at <br><a href="https://github.com/crazycapivara/owmr">https://​github.com/​crazycapivara/​owmr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/crazycapivara/owmr/issues/">https://​github.com/​crazycapivara/​owmr/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Stefan Kuethe <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=owmr"><img src="https://www.r-pkg.org/badges/version/owmr" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>
</div>
</div>

      <footer><div class="copyright">
  <p>Developed by Stefan Kuethe.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
